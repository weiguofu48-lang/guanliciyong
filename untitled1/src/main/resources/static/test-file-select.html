<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文件选择测试</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; border-radius: 5px; }
        .result { margin: 10px 0; padding: 10px; background: #f5f5f5; border-radius: 3px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        
        .file-input-wrapper {
            position: relative;
            display: inline-block;
            cursor: pointer;
            background: #007bff;
            color: white;
            padding: 12px 24px;
            border-radius: 4px;
            transition: background-color 0.3s ease;
            border: 2px solid #007bff;
            min-width: 200px;
            text-align: center;
        }
        
        .file-input-wrapper:hover {
            background: #0056b3;
            border-color: #0056b3;
        }
        
        .file-input-wrapper:active {
            background: #004085;
            border-color: #004085;
        }
        
        .file-input-wrapper input[type="file"] {
            position: absolute;
            left: -9999px;
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .normal-file-input {
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>文件选择功能测试</h1>
    
    <div class="test-section">
        <h3>测试1：自定义样式的文件选择器</h3>
        <p>点击下面的蓝色按钮来选择文件：</p>
        <div class="file-input-wrapper">
            <input type="file" id="customFileInput">
            <span>点击选择文件</span>
        </div>
        <div id="customResult" class="result">等待选择文件...</div>
    </div>
    
    <div class="test-section">
        <h3>测试2：普通文件选择器</h3>
        <p>对比：普通的文件选择器：</p>
        <input type="file" id="normalFileInput" class="normal-file-input">
        <div id="normalResult" class="result">等待选择文件...</div>
    </div>
    
    <div class="test-section">
        <h3>测试3：文件信息显示</h3>
        <div id="fileInfo" class="result">选择文件后将显示详细信息</div>
    </div>
    
    <script>
        // 测试自定义文件选择器
        document.getElementById('customFileInput').addEventListener('change', function() {
            const file = this.files[0];
            const resultDiv = document.getElementById('customResult');
            
            if (file) {
                resultDiv.innerHTML = `
                    <div class="success">
                        ✅ 自定义文件选择器工作正常<br>
                        文件名: ${file.name}<br>
                        文件大小: ${file.size} 字节<br>
                        文件类型: ${file.type}
                    </div>
                `;
                updateFileInfo(file);
            } else {
                resultDiv.innerHTML = '<div class="error">❌ 没有选择文件</div>';
            }
        });
        
        // 为自定义文件选择器添加点击事件
        document.querySelector('.file-input-wrapper').addEventListener('click', function() {
            document.getElementById('customFileInput').click();
        });
        
        // 测试普通文件选择器
        document.getElementById('normalFileInput').addEventListener('change', function() {
            const file = this.files[0];
            const resultDiv = document.getElementById('normalResult');
            
            if (file) {
                resultDiv.innerHTML = `
                    <div class="success">
                        ✅ 普通文件选择器工作正常<br>
                        文件名: ${file.name}<br>
                        文件大小: ${file.size} 字节<br>
                        文件类型: ${file.type}
                    </div>
                `;
                updateFileInfo(file);
            } else {
                resultDiv.innerHTML = '<div class="error">❌ 没有选择文件</div>';
            }
        });
        
        function updateFileInfo(file) {
            const infoDiv = document.getElementById('fileInfo');
            const fileSizeKB = (file.size / 1024).toFixed(2);
            const fileSizeMB = (file.size / (1024 * 1024)).toFixed(2);
            
            infoDiv.innerHTML = `
                <div class="success">
                    <h4>文件详细信息：</h4>
                    <p><strong>文件名:</strong> ${file.name}</p>
                    <p><strong>文件大小:</strong> ${file.size} 字节 (${fileSizeKB} KB / ${fileSizeMB} MB)</p>
                    <p><strong>文件类型:</strong> ${file.type || '未知'}</p>
                    <p><strong>最后修改:</strong> ${new Date(file.lastModified).toLocaleString()}</p>
                    <p><strong>是否可读:</strong> ${file.size > 0 ? '是' : '否'}</p>
                </div>
            `;
        }
        
        // 页面加载完成后的提示
        document.addEventListener('DOMContentLoaded', function() {
            console.log('文件选择测试页面已加载');
            console.log('请尝试点击蓝色按钮选择文件');
        });
    </script>
</body>
</html>


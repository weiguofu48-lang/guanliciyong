<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ç”¨æˆ·ç®¡ç† - ä¼ä¸šç®¡ç†ç³»ç»Ÿ</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ä¼ä¸šç®¡ç†ç³»ç»Ÿ</h1>
            <p>ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ</p>
        </div>
        
        <div class="content">
            <div class="page-header">
                <h2 class="page-title">ğŸ‘¤ ç”¨æˆ·ç®¡ç†</h2>
                <div class="page-info">
                    <span class="info-item">æ€»ç”¨æˆ·æ•°: <span id="user-count">0</span></span>
                    <a th:href="@{/register}" class="btn btn-success">â• æ·»åŠ </a>
                </div>
            </div>

            <!-- æˆåŠŸæ¶ˆæ¯ -->
            <div th:if="${successMessage}" class="alert alert-success">
                <p th:text="${successMessage}"></p>
            </div>

            <!-- é”™è¯¯æ¶ˆæ¯ -->
            <div th:if="${errorMessage}" class="alert alert-danger">
                <p th:text="${errorMessage}"></p>
            </div>

            <!-- åŠ¨æ€ç”¨æˆ·åˆ—è¡¨å®¹å™¨ -->
            <div id="user-list-container">
                <p>æ­£åœ¨åŠ è½½ç”¨æˆ·åˆ—è¡¨...</p>
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <a th:href="@{/home}" class="btn btn-secondary">ğŸ  è¿”å›é¦–é¡µ</a>
            </div>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script th:inline="javascript">
        $(document).ready(function() {
            // åŠ è½½ç”¨æˆ·åˆ—è¡¨å†…å®¹å¹¶æ›´æ–°è®¡æ•°
            $("#user-list-container").load(/*[[@{/users/content}]]*/, function(response, status, xhr) {
                if (status == "error") {
                    $(this).html("<p style='color: red;'>åŠ è½½ç”¨æˆ·åˆ—è¡¨å¤±è´¥: " + xhr.status + " " + xhr.statusText + "</p>");
                } else {
                    // æ›´æ–°ç”¨æˆ·æ•°é‡
                    var userCount = $(this).find('tbody tr').length;
                    $('#user-count').text(userCount);
                }
            });
        });
    </script>
</body>
</html>
